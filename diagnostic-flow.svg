<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 440" font-family="'Segoe UI', 'Helvetica Neue', Arial, sans-serif">
  <defs>
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="108%">
      <feDropShadow dx="1" dy="2" stdDeviation="3" flood-opacity="0.1"/>
    </filter>
    <marker id="arr" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#64748b"/>
    </marker>
    <marker id="arr-g" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#22c55e"/>
    </marker>
    <marker id="arr-b" viewBox="0 0 10 10" refX="9" refY="5" markerWidth="7" markerHeight="7" orient="auto-start-auto">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#3b82f6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="440" fill="#f8fafc" rx="8"/>

  <!-- Title -->
  <text x="450" y="34" text-anchor="middle" font-size="18" font-weight="700" fill="#0f172a">PodLikar Diagnostic Flow</text>

  <!-- Input -->
  <rect x="350" y="55" width="200" height="48" rx="24" fill="#0f172a" filter="url(#shadow)"/>
  <text x="450" y="84" text-anchor="middle" font-size="13" font-weight="600" fill="#fff">User Prompt</text>

  <!-- Decision diamond - approximate with rotated square -->
  <g transform="translate(450, 148)">
    <rect x="-55" y="-30" width="110" height="60" rx="8" fill="#fff" stroke="#64748b" stroke-width="1.5" filter="url(#shadow)"/>
    <text x="0" y="-5" text-anchor="middle" font-size="11" font-weight="600" fill="#0f172a">Which mode?</text>
    <text x="0" y="12" text-anchor="middle" font-size="9" fill="#64748b">keyword detection</text>
  </g>

  <!-- Arrow from input to decision -->
  <line x1="450" y1="103" x2="450" y2="115" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr)"/>

  <!-- LEFT BRANCH: Health Check -->
  <text x="225" y="140" text-anchor="middle" font-size="11" font-weight="600" fill="#22c55e">"health check"</text>
  <line x1="395" y1="148" x2="310" y2="148" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arr-g)"/>

  <!-- Health Check Steps -->
  <rect x="130" y="190" width="190" height="40" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="145" y="207" font-size="10" fill="#64748b">1.</text>
  <text x="160" y="207" font-size="10" font-weight="600" fill="#15803d">get_resources</text>
  <text x="160" y="222" font-size="9" fill="#64748b">nodes</text>

  <rect x="130" y="240" width="190" height="40" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="145" y="257" font-size="10" fill="#64748b">2.</text>
  <text x="160" y="257" font-size="10" font-weight="600" fill="#15803d">get_resources</text>
  <text x="160" y="272" font-size="9" fill="#64748b">pods (all namespaces, wide)</text>

  <rect x="130" y="290" width="190" height="40" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="145" y="307" font-size="10" fill="#64748b">3.</text>
  <text x="160" y="307" font-size="10" font-weight="600" fill="#15803d">get_resources</text>
  <text x="160" y="322" font-size="9" fill="#64748b">PVCs (all namespaces)</text>

  <rect x="130" y="340" width="190" height="40" rx="6" fill="#f0fdf4" stroke="#22c55e" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="145" y="357" font-size="10" fill="#64748b">4.</text>
  <text x="160" y="357" font-size="10" font-weight="600" fill="#15803d">get_resources</text>
  <text x="160" y="372" font-size="9" fill="#64748b">longhorn-system pods</text>

  <!-- Arrows between health check steps -->
  <line x1="225" y1="170" x2="225" y2="186" stroke="#22c55e" stroke-width="1" marker-end="url(#arr-g)"/>
  <line x1="225" y1="230" x2="225" y2="236" stroke="#22c55e" stroke-width="1"/>
  <line x1="225" y1="280" x2="225" y2="286" stroke="#22c55e" stroke-width="1"/>
  <line x1="225" y1="330" x2="225" y2="336" stroke="#22c55e" stroke-width="1"/>

  <!-- Health Check Output -->
  <rect x="130" y="395" width="190" height="35" rx="6" fill="#22c55e" filter="url(#shadow)"/>
  <text x="225" y="417" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">Structured Report</text>

  <line x1="225" y1="380" x2="225" y2="391" stroke="#22c55e" stroke-width="1.5" marker-end="url(#arr-g)"/>

  <!-- Token badge health check -->
  <rect x="88" y="400" width="36" height="18" rx="9" fill="#dcfce7"/>
  <text x="106" y="413" text-anchor="middle" font-size="8" font-weight="700" fill="#15803d">4</text>
  <text x="106" y="430" text-anchor="middle" font-size="7" fill="#64748b">calls</text>

  <!-- RIGHT BRANCH: Targeted Diagnosis -->
  <text x="675" y="140" text-anchor="middle" font-size="11" font-weight="600" fill="#3b82f6">"diagnose pod X"</text>
  <line x1="505" y1="148" x2="590" y2="148" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arr-b)"/>

  <!-- Targeted Steps -->
  <rect x="580" y="190" width="190" height="40" rx="6" fill="#eff6ff" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="595" y="207" font-size="10" fill="#64748b">1.</text>
  <text x="610" y="207" font-size="10" font-weight="600" fill="#1e40af">get_resources</text>
  <text x="610" y="222" font-size="9" fill="#64748b">pods in namespace</text>

  <rect x="580" y="250" width="190" height="48" rx="6" fill="#eff6ff" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="595" y="269" font-size="10" fill="#64748b">2.</text>
  <text x="610" y="269" font-size="10" font-weight="600" fill="#1e40af">describe_resource</text>
  <text x="610" y="284" font-size="9" fill="#64748b">target pod (includes events!)</text>

  <rect x="580" y="318" width="190" height="40" rx="6" fill="#eff6ff" stroke="#3b82f6" stroke-width="1.2" filter="url(#shadow)"/>
  <text x="595" y="335" font-size="10" fill="#64748b">3.</text>
  <text x="610" y="335" font-size="10" font-weight="600" fill="#1e40af">get_pod_logs</text>
  <text x="610" y="350" font-size="9" fill="#64748b">tail_lines=20</text>

  <!-- Arrows between targeted steps -->
  <line x1="675" y1="170" x2="675" y2="186" stroke="#3b82f6" stroke-width="1" marker-end="url(#arr-b)"/>
  <line x1="675" y1="230" x2="675" y2="246" stroke="#3b82f6" stroke-width="1"/>
  <line x1="675" y1="298" x2="675" y2="314" stroke="#3b82f6" stroke-width="1"/>

  <!-- Targeted Output -->
  <rect x="580" y="378" width="190" height="48" rx="6" fill="#3b82f6" filter="url(#shadow)"/>
  <text x="675" y="398" text-anchor="middle" font-size="11" font-weight="600" fill="#fff">Root Cause + Fix</text>
  <text x="675" y="414" text-anchor="middle" font-size="9" fill="#dbeafe">Pod / Status / Evidence</text>

  <line x1="675" y1="358" x2="675" y2="374" stroke="#3b82f6" stroke-width="1.5" marker-end="url(#arr-b)"/>

  <!-- Token badge targeted -->
  <rect x="538" y="383" width="36" height="18" rx="9" fill="#dbeafe"/>
  <text x="556" y="396" text-anchor="middle" font-size="8" font-weight="700" fill="#1e40af">3</text>
  <text x="556" y="413" text-anchor="middle" font-size="7" fill="#64748b">calls</text>

  <!-- Center divider -->
  <line x1="450" y1="185" x2="450" y2="430" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="6 4"/>

  <!-- Total tokens annotation -->
  <rect x="400" y="192" width="100" height="22" rx="11" fill="#fef3c7" stroke="#f59e0b" stroke-width="1"/>
  <text x="450" y="207" text-anchor="middle" font-size="9" font-weight="700" fill="#92400e">~12K tokens</text>
</svg>
